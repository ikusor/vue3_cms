import{a as $,O as K,z as y,o as c,f as S,g as e,w as t,j as E,a3 as v,a2 as N,k as V,p as z,x as A,t as R,a5 as W,a6 as X,au as Y,V as L,ao as P}from"./index-Y4Rm1UyW.js";import{E as B}from"./el-button-D2Kp3mTB.js";import{E as M,a as q}from"./el-form-item-BSu2bw99.js";import{E as Z,a as ee}from"./el-col-BddE3-2q.js";import{E as le,a as te}from"./el-overlay-pLGtDFsq.js";import{E as T}from"./el-checkbox-C-h0dbjF.js";import"./el-scrollbar-CkpSCn_1.js";import"./el-popper-BbV4k6S7.js";import{E as Q,a as j,u as D,b as O,f as F,c as ae,d as oe,e as ne}from"./format-DChr1d26.js";import"./constants-CI75o6qA.js";import"./vnode-Cwmayi5d.js";import"./refs-iUEiEER8.js";const se={class:"search"},re={class:"btns"},de=$({__name:"user-search",emits:["queryClick","resetClick"],setup(w,{emit:b}){const l=K({name:"",realname:"",cellphone:"",enable:"",createAt:""}),f=y(),m=b,g=()=>{var s;(s=f.value)==null||s.resetFields(),m("resetClick")},_=()=>{m("queryClick",l)};return(s,n)=>{const h=T,d=M,a=Z,k=Q,u=j,U=le,I=ee,x=q,p=B;return c(),S("div",se,[e(x,{model:l,ref_key:"formRef",ref:f,"label-width":"120px",size:"large"},{default:t(()=>[e(I,{gutter:20},{default:t(()=>[e(a,{span:8},{default:t(()=>[e(d,{label:"用户名",prop:"name"},{default:t(()=>[e(h,{modelValue:l.name,"onUpdate:modelValue":n[0]||(n[0]=r=>l.name=r),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{span:8},{default:t(()=>[e(d,{label:"真实姓名",prop:"realname"},{default:t(()=>[e(h,{modelValue:l.realname,"onUpdate:modelValue":n[1]||(n[1]=r=>l.realname=r),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{span:8},{default:t(()=>[e(d,{label:"手机号码",prop:"cellphone"},{default:t(()=>[e(h,{modelValue:l.cellphone,"onUpdate:modelValue":n[2]||(n[2]=r=>l.cellphone=r),placeholder:"请输入手机号码"},null,8,["modelValue"])]),_:1})]),_:1}),e(a,{span:8},{default:t(()=>[e(d,{label:"状态",prop:"enable"},{default:t(()=>[e(u,{modelValue:l.enable,"onUpdate:modelValue":n[3]||(n[3]=r=>l.enable=r),placeholder:"请选择状态",style:{width:"100%"}},{default:t(()=>[e(k,{label:"启用",value:1}),e(k,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(a,{span:8},{default:t(()=>[e(d,{label:"创建时间",prop:"createAt"},{default:t(()=>[e(U,{modelValue:l.createAt,"onUpdate:modelValue":n[4]||(n[4]=r=>l.createAt=r),type:"daterange","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),E("div",re,[e(p,{size:"large",icon:"Refresh",onClick:g},{default:t(()=>[v("重置")]),_:1}),e(p,{size:"large",icon:"Search",type:"primary",onClick:_},{default:t(()=>[v(" 查询 ")]),_:1})])])}}}),ue=N(de,[["__scopeId","data-v-0b0b6af8"]]),ie=w=>(W("data-v-83240b9a"),w=w(),X(),w),pe={class:"content"},ce={class:"header"},me=ie(()=>E("h3",{class:"title"},"用户列表",-1)),_e={class:"table"},fe={class:"footer"},ve=$({__name:"user-content",emits:["newClick","editClick"],setup(w,{expose:b,emit:l}){const f=l,m=D("users:create"),g=D("users:update"),_=D("users:delete"),s=D("users:query"),n=O(),h=y(10),d=y(1);u();const a=()=>{u()};function k(){u()}function u(p={}){if(!s)return;const r=h.value,o=(d.value-1)*r;n.postUserListDataAction({offset:o,size:r,...p})}const U=p=>{n.deleteUserByIdAction(p)};function I(){f("newClick")}function x(p){f("editClick",p)}return b({fetchUserListData:u}),(p,r)=>{const o=B,C=ae,G=oe,H=ne;return c(),S("div",pe,[E("div",ce,[me,V(m)?(c(),z(o,{key:0,type:"primary",onClick:I},{default:t(()=>[v("新建用户")]),_:1})):A("",!0)]),E("div",_e,[e(G,{data:V(n).userList,border:!0,style:{width:"100%"}},{default:t(()=>[e(C,{align:"center",type:"selection",label:"选择"}),e(C,{align:"center",type:"index",label:"序号",width:"55"}),e(C,{align:"center",prop:"name",label:"用户名",width:"100"}),e(C,{align:"center",prop:"realname",label:"真实姓名",width:"150"}),e(C,{align:"center",prop:"cellphone",label:"手机号码",width:"170"}),e(C,{align:"center",prop:"enable",label:"状态",width:"80"},{default:t(i=>[e(o,{size:"small",type:i.row.enable?"primary":"danger",plain:""},{default:t(()=>[v(R(i.row.enable?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),e(C,{align:"center",prop:"createAt",label:"创建时间",width:"210"},{default:t(i=>[v(R(V(F)(i.row.createAt)),1)]),_:1}),e(C,{align:"center",prop:"updateAt",label:"更新时间",width:"210"},{default:t(i=>[v(R(V(F)(i.row.updateAt)),1)]),_:1}),e(C,{align:"center",label:"操作",width:"180"},{default:t(i=>[V(g)?(c(),z(o,{key:0,type:"primary",size:"small",icon:"EditPen",link:"",onClick:J=>x(i.row)},{default:t(()=>[v("编辑")]),_:2},1032,["onClick"])):A("",!0),V(_)?(c(),z(o,{key:1,type:"danger",size:"small",icon:"Delete",link:"",onClick:J=>U(i.row.id)},{default:t(()=>[v("删除")]),_:2},1032,["onClick"])):A("",!0)]),_:1})]),_:1},8,["data"])]),E("div",fe,[e(H,{"current-page":d.value,"onUpdate:currentPage":r[0]||(r[0]=i=>d.value=i),"page-size":h.value,"onUpdate:pageSize":r[1]||(r[1]=i=>h.value=i),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:V(n).userTotalCount,onSizeChange:a,onCurrentChange:k},null,8,["current-page","page-size","total"])])])}}}),be=N(ve,[["__scopeId","data-v-83240b9a"]]),he={class:"model"},ke={class:"form"},Ce={class:"dialog-footer"},Ve=$({__name:"user-model",setup(w,{expose:b}){const l=y({name:"",realname:"",password:"",cellphone:"",roleId:"",departmentId:""}),f=y(),m=Y(),g=O(),_=y(!1),s=y(!0);function n(d){if(_.value=!0,d){s.value=!1,f.value=d.id;for(const a in l.value)l.value[a]=d[a]}else{s.value=!0;for(const a in l.value)l.value[a]=""}}const h=()=>{s.value?(g.newUserDataAction(l.value),l.value.name="",l.value.realname="",l.value.password="",l.value.cellphone="",l.value.roleId="",l.value.departmentId=""):g.editUserDataAction(f.value,l.value),_.value=!1};return b({setModelVisible:n}),(d,a)=>{const k=T,u=M,U=Q,I=j,x=q,p=B,r=te;return c(),S("div",he,[e(r,{modelValue:_.value,"onUpdate:modelValue":a[7]||(a[7]=o=>_.value=o),title:s.value?"新建用户":"编辑用户",width:"500",center:""},{footer:t(()=>[E("div",Ce,[e(p,{onClick:a[6]||(a[6]=o=>_.value=!1)},{default:t(()=>[v("取消")]),_:1}),e(p,{type:"primary",onClick:h},{default:t(()=>[v(" 确定 ")]),_:1})])]),default:t(()=>[E("div",ke,[e(x,{model:l.value,"label-width":"70px"},{default:t(()=>[e(u,{label:"用户名",prop:"name"},{default:t(()=>[e(k,{modelValue:l.value.name,"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.name=o),placeholder:"请输入用户名"},null,8,["modelValue"])]),_:1}),e(u,{label:"真实姓名",prop:"realname"},{default:t(()=>[e(k,{modelValue:l.value.realname,"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.realname=o),placeholder:"请输入真实姓名"},null,8,["modelValue"])]),_:1}),s.value?(c(),z(u,{key:0,label:"密码",prop:"password"},{default:t(()=>[e(k,{modelValue:l.value.password,"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.password=o),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})):A("",!0),e(u,{label:"电话号码",prop:"cellphone"},{default:t(()=>[e(k,{modelValue:l.value.cellphone,"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.cellphone=o),placeholder:"请输入电话号码"},null,8,["modelValue"])]),_:1}),e(u,{label:"选择角色",prop:"roleId"},{default:t(()=>[e(I,{modelValue:l.value.roleId,"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.roleId=o),placeholder:"请选择角色",style:{width:"100%"}},{default:t(()=>[(c(!0),S(L,null,P(V(m).entireRoles,o=>(c(),z(U,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"选择部门",prop:"departmentId"},{default:t(()=>[e(I,{modelValue:l.value.departmentId,"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.departmentId=o),placeholder:"请选择部门",style:{width:"100%"}},{default:t(()=>[(c(!0),S(L,null,P(V(m).entireDepartments,o=>(c(),z(U,{key:o.id,value:o.id,label:o.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])])]),_:1},8,["modelValue","title"])])}}}),ye=N(Ve,[["__scopeId","data-v-057a461a"]]),ge={class:"user"},Be=$({__name:"user",setup(w){const b=y(),l=s=>{var n;(n=b.value)==null||n.fetchUserListData(s)},f=()=>{var s;(s=b.value)==null||s.fetchUserListData()},m=y(),g=()=>{var s;(s=m.value)==null||s.setModelVisible()},_=s=>{var n;(n=m.value)==null||n.setModelVisible(s)};return(s,n)=>(c(),S("div",ge,[e(ue,{onQueryClick:l,onResetClick:f}),e(be,{ref_key:"contentRef",ref:b,onNewClick:g,onEditClick:_},null,512),e(ye,{ref_key:"modelRef",ref:m},null,512)]))}});export{Be as default};
