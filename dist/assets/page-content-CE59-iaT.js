import{a as H,z as b,o,f as y,j as u,t as h,k as i,p as r,w as c,a3 as f,x as v,g as D,V as x,ao as J,ag as _,a2 as K}from"./index-Y4Rm1UyW.js";import{u as C,b as M,f as O,c as R,d as W,e as X}from"./format-DChr1d26.js";import"./el-checkbox-C-h0dbjF.js";import"./el-scrollbar-CkpSCn_1.js";import"./el-popper-BbV4k6S7.js";import{E as Y}from"./el-button-D2Kp3mTB.js";const Z={class:"content"},ee={class:"header"},te={class:"title"},ne={class:"table"},ae={class:"footer"},oe=H({__name:"page-content",props:{contentConfig:{}},emits:["newClick","editClick"],setup(E,{expose:S,emit:B}){const P=B,t=E,$=C(`${t.contentConfig.pageName}:create`),A=C(`${t.contentConfig.pageName}:update`),T=C(`${t.contentConfig.pageName}:delete`),L=C(`${t.contentConfig.pageName}:query`),l=M(),m=b(10),d=b(1);l.$onAction(({name:n,after:a})=>{a(()=>{(n==="deletePageByIdAction"||n==="editPageDataAction"||n==="newPageDataAction")&&(d.value=1)})}),g();const V=()=>{g()};function I(){g()}function g(n={}){if(!L)return;const a=m.value,p=(d.value-1)*a;l.postPageListDataAction(t.contentConfig.pageName,{offset:p,size:a,...n})}const U=n=>{l.deletePageByIdAction(t.contentConfig.pageName,n)};function j(){P("newClick")}function q(n){P("editClick",n)}return S({fetchPageListData:g}),(n,a)=>{var z,w,N;const p=Y,k=R,F=W,Q=X;return o(),y("div",Z,[u("div",ee,[u("h3",te,h(((w=(z=t.contentConfig)==null?void 0:z.header)==null?void 0:w.title)??"部门列表"),1),i($)?(o(),r(p,{key:0,type:"primary",onClick:j},{default:c(()=>{var e,s;return[f(h(((s=(e=t.contentConfig)==null?void 0:e.header)==null?void 0:s.btnTitle)??"新建部门"),1)]}),_:1})):v("",!0)]),u("div",ne,[D(F,_({data:i(l).pageList,border:!0,style:{width:"100%"}},(N=t.contentConfig)==null?void 0:N.childrenTree),{default:c(()=>[(o(!0),y(x,null,J(t.contentConfig.propsList,e=>(o(),y(x,{key:e.prop},[e.type==="timer"?(o(),r(k,_({key:0,align:"center",ref_for:!0},e,{width:"210"}),{default:c(s=>[f(h(i(O)(s.row[e.prop])),1)]),_:2},1040)):e.type==="handler"?(o(),r(k,_({key:1,align:"center",ref_for:!0},e),{default:c(s=>[i(A)?(o(),r(p,{key:0,type:"primary",size:"small",icon:"EditPen",link:"",onClick:G=>q(s.row)},{default:c(()=>[f("编辑")]),_:2},1032,["onClick"])):v("",!0),i(T)?(o(),r(p,{key:1,type:"danger",size:"small",icon:"Delete",link:"",onClick:G=>U(s.row.id)},{default:c(()=>[f("删除")]),_:2},1032,["onClick"])):v("",!0)]),_:2},1040)):(o(),r(k,_({key:2,align:"center",ref_for:!0},e),null,16))],64))),128))]),_:1},16,["data"])]),u("div",ae,[D(Q,{"current-page":d.value,"onUpdate:currentPage":a[0]||(a[0]=e=>d.value=e),"page-size":m.value,"onUpdate:pageSize":a[1]||(a[1]=e=>m.value=e),"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:i(l).pageTotalCount,onSizeChange:V,onCurrentChange:I},null,8,["current-page","page-size","total"])])])}}}),de=K(oe,[["__scopeId","data-v-a1248869"]]);export{de as p};
